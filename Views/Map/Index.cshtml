@{
    ViewData["Title"] = "KÃ¼tÃ¼phane HaritasÄ±";
}

<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

<div class="container mt-4">
    <h2>ğŸ“ KÃ¼tÃ¼phane Åubeleri HaritasÄ±</h2>
    <p>GIS TabanlÄ± KÃ¼tÃ¼phane KonumlandÄ±rma Sistemi</p>
    
    <div id="map" style="height: 500px; width: 100%; border-radius: 10px; border: 2px solid #ddd;"></div>
</div>

<script>
    // 1. HaritayÄ± BaÅŸlat (Merkez: Ankara)
    var map = L.map('map').setView([39.92, 32.85], 11);

    // 2. Harita KatmanÄ±nÄ± Ekle (OpenStreetMap)
    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
        attribution: '&copy; OpenStreetMap contributors'
    }).addTo(map);

    // 3. API'den Verileri Ã‡ek ve Ä°ÅŸaretle
    fetch('/api/LibraryApi')
        .then(response => response.json())
        .then(data => {
            data.forEach(branch => {
                // Her kÃ¼tÃ¼phane iÃ§in bir iÅŸaretÃ§i (Marker) ekle
                L.marker([branch.lat, branch.lng])
                    .addTo(map)
                    .bindPopup(`<b>${branch.name}</b><br>${branch.address}`);
            });
        })
        .catch(error => console.error('Hata:', error));
</script> 